{"ast":null,"code":"import _regeneratorRuntime from\"/Users/josephwojtowicz/Desktop/genrerator/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/josephwojtowicz/Desktop/genrerator/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/josephwojtowicz/Desktop/genrerator/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useCallback,useEffect,useState}from'react';import'./App.css';import axios from'axios';import{Credentials}from'./Credentials';import{DropdownButton,Dropdown,Row}from'react-bootstrap';import{Link,BrowserRouter as Router,Route}from'react-router-dom';import Button from'react-bootstrap/Button';import Col from'react-bootstrap/Col';import Container from'react-bootstrap/Container';import GenreList from'./components/GenreList';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var spotify=Credentials();console.log('RENDERING APP.JS');var _useState=useState(''),_useState2=_slicedToArray(_useState,2),token=_useState2[0],setToken=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),filter=_useState4[0],setFilter=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),filterToSend=_useState6[0],setFilterToSend=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),items=_useState8[0],setItems=_useState8[1];var _useState9=useState({genre:''}),_useState10=_slicedToArray(_useState9,2),genre=_useState10[0],setGenre=_useState10[1];var _useState11=useState({genre:''}),_useState12=_slicedToArray(_useState11,2),data=_useState12[0],getGenreData=_useState12[1];console.log('token',token);console.log('filter',filter);console.log('items',items);console.log('genre',genre);//when the app loads, request a token from spotify\n//and save it to state.\nuseEffect(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios('https://accounts.spotify.com/api/token',{headers:{'Content-Type':'application/x-www-form-urlencoded','Authorization':'Basic '+btoa(spotify.ClientId+':'+spotify.ClientSecret)},data:'grant_type=client_credentials',method:'POST'});case 2:response=_context.sent;setToken(response.data.access_token);//empty array dependency = this runs once on load\ncase 4:case\"end\":return _context.stop();}}},_callee);})),[]);var handleChange=function handleChange(e){setGenre({genre:e.target.value});};var onSubmit=function onSubmit(e){e.preventDefault();axios.post('http://localhost:3001/genres/',genre).then(function(response){console.log(response);}).catch(function(error){console.log(error);});setGenre({genre:''});};var handleSearch=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0://preventDefault keeps page from rerendering and bad things happening\ne.preventDefault();console.log('filter',filter);//call axios with filter and token from state\n_context2.next=4;return axios(\"https://api.spotify.com/v1/search?q=genre:\\\"\".concat(filter,\"\\\"&type=artist\"),{method:'GET',headers:{'Authorization':'Bearer '+token}});case 4:response=_context2.sent;//set response into state\nsetItems(response.data.artists.items);case 6:case\"end\":return _context2.stop();}}},_callee2);}));return function handleSearch(_x){return _ref2.apply(this,arguments);};}();var searchAndHandle=function searchAndHandle(e){handleSearch(e);handleChange(e);onSubmit(e);};var filterAndHandle=function filterAndHandle(e){setFilter(e.target.value);handleChange(e);};return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"genrerator\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Container,{fluid:\"sm\",children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{sm:8,children:[/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"p\",{children:\"search for a genre of music you enjoy\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:setGenre.genre,onChange:function onChange(e){return filterAndHandle(e);}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"p\",{children:\"or pick one here\"}),/*#__PURE__*/_jsxs(\"select\",{value:\"this.target.value\",onChange:function onChange(e){return setFilter(e.target.value);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"genre\",children:\"choose one!\"}),/*#__PURE__*/_jsx(\"option\",{value:\"nz indie\",children:\"nz indie\"}),/*#__PURE__*/_jsx(\"option\",{value:\"highlife\",children:\"highlife\"}),/*#__PURE__*/_jsx(\"option\",{value:\"c86\",children:\"c86\"}),/*#__PURE__*/_jsx(\"option\",{value:\"chopped and screwed\",children:\"chopped and screwed\"}),/*#__PURE__*/_jsx(\"option\",{value:\"nwobhm\",children:\"nwobhm\"}),/*#__PURE__*/_jsx(\"option\",{value:\"library music\",children:\"library music\"})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",name:\"genre\",value:setGenre.genre,onClick:function onClick(e){return searchAndHandle(e);}})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{children:items.map(function(item){return/*#__PURE__*/_jsx(\"div\",{className:\"list-group\",children:/*#__PURE__*/_jsx(Button,{variant:\"outline-secondary-md\",id:item.name,children:item.name},0)});})})]}),/*#__PURE__*/_jsx(Col,{sm:2,children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(GenreList,{})})})]})})]})});};export default App;","map":{"version":3,"sources":["/Users/josephwojtowicz/Desktop/genrerator/client/src/App.js"],"names":["useCallback","useEffect","useState","axios","Credentials","DropdownButton","Dropdown","Row","Link","BrowserRouter","Router","Route","Button","Col","Container","GenreList","App","spotify","console","log","token","setToken","filter","setFilter","filterToSend","setFilterToSend","items","setItems","genre","setGenre","data","getGenreData","headers","btoa","ClientId","ClientSecret","method","response","access_token","handleChange","e","target","value","onSubmit","preventDefault","post","then","catch","error","handleSearch","artists","searchAndHandle","filterAndHandle","map","item","name"],"mappings":"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","sourcesContent":["import { useCallback, useEffect, useState } from 'react';\nimport './App.css';\nimport axios from 'axios';\nimport { Credentials } from './Credentials'\nimport { DropdownButton, Dropdown, Row } from 'react-bootstrap';\nimport { Link, BrowserRouter as Router, Route } from 'react-router-dom';\nimport Button from 'react-bootstrap/Button'\nimport Col from 'react-bootstrap/Col'\nimport Container from 'react-bootstrap/Container'\nimport GenreList from './components/GenreList'\n\nconst App = () => {\n\n  const spotify = Credentials();  \n\n  console.log('RENDERING APP.JS');\n\n  const [token, setToken] = useState(''); \n  const [filter, setFilter] = useState('');\n  const [filterToSend, setFilterToSend] = useState('')\n  const [items, setItems] = useState([]);\n  const [genre, setGenre] = useState({genre: ''});\n  const [data, getGenreData] = useState({genre: ''});\n  console.log('token', token)\n  console.log('filter', filter)\n  console.log('items', items)\n  console.log('genre', genre)\n  //when the app loads, request a token from spotify\n  //and save it to state.\n\n\n \n  useEffect(async() => {\n    const response = await axios('https://accounts.spotify.com/api/token', {\n        headers: {\n        'Content-Type' : 'application/x-www-form-urlencoded',\n        'Authorization' : 'Basic ' + btoa(spotify.ClientId + ':' + spotify.ClientSecret)      \n      },\n      data: 'grant_type=client_credentials',\n      method: 'POST'\n    })\n    setToken(response.data.access_token)\n    //empty array dependency = this runs once on load\n  },[])\n\n  const handleChange = (e) => {\n    setGenre({genre: e.target.value})\n  }\n\n  const onSubmit = (e) => {\n    e.preventDefault();\n\n    axios.post('http://localhost:3001/genres/', genre)\n    .then(function (response) {\n      console.log(response)\n    })\n    .catch(function (error) {\n      console.log(error)\n    })\n    setGenre({genre:''})\n  };\n\n\n  const handleSearch = async (e) => {\n    //preventDefault keeps page from rerendering and bad things happening\n    e.preventDefault()\n    console.log('filter', filter)\n    //call axios with filter and token from state\n    const response = await axios(`https://api.spotify.com/v1/search?q=genre:\"${filter}\"&type=artist`, {\n      method: 'GET', \n      headers: { 'Authorization' : 'Bearer ' + token}\n    })\n    //set response into state\n    setItems(response.data.artists.items)\n    }\n\n  const searchAndHandle = (e) => {\n    handleSearch(e);\n    handleChange(e);\n    onSubmit(e);\n  }\n\n  const filterAndHandle = (e) => {\n    setFilter(e.target.value);\n    handleChange(e);\n  }\n\n\n  return (\n    <Router>\n   \n    <div className=\"App\" >\n        <h1>genrerator</h1>\n        <br></br>\n       <Container fluid=\"sm\">\n        <Row>\n        <Col sm={8}>\n        <form>\n          <p>search for a genre of music you enjoy</p>\n          <input type=\"text\" value={setGenre.genre} onChange={(e) => filterAndHandle(e)}/>\n          <br></br>\n          <p>or pick one here</p>\n          <select value=\"this.target.value\" onChange={(e) => setFilter(e.target.value)}>\n            <option value=\"genre\">choose one!</option>\n            <option value=\"nz indie\">nz indie</option>\n            <option value=\"highlife\">highlife</option>\n            <option value=\"c86\">c86</option>\n            <option value=\"chopped and screwed\">chopped and screwed</option>\n            <option value=\"nwobhm\">nwobhm</option>\n            <option value=\"library music\">library music</option>\n          </select>\n          <br></br>\n          <br></br>\n          <input type=\"submit\" name=\"genre\" value={setGenre.genre} onClick={(e) => searchAndHandle(e)} />\n        </form>\n        <br></br>\n        <div>\n          {items.map(item => \n            <div className=\"list-group\">\n              <Button variant=\"outline-secondary-md\"\n              key={0}\n              id={item.name}>\n                {item.name}\n              </Button>\n            </div>\n          )}\n        </div>\n        </Col>\n\n        <Col sm={2}>\n        <div>\n        <GenreList />\n        </div>\n        </Col>\n\n        </Row>\n      </Container> \n      </div>\n      \n    </Router>\n  );\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}