{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport Axios from \"axios\";\nimport { Credentials } from './Credentials';\n\nconst API = () => {\n  _s();\n\n  const spotify = Credentials();\n  console.log('RENDERING APP.JS');\n  const [token, setToken] = useState('');\n  const [filter, setFilter] = useState('');\n  const [filterToSend, setFilterToSend] = useState('');\n  const [items, setItems] = useState([]);\n  console.log('token', token);\n  console.log('filter', filter);\n  console.log('items', items); //when the app loads, request a token from spotify\n  //and save it to state.\n\n  useEffect(async () => {\n    const response = await axios('https://accounts.spotify.com/api/token', {\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n        'Authorization': 'Basic ' + btoa(spotify.ClientId + ':' + spotify.ClientSecret)\n      },\n      data: 'grant_type=client_credentials',\n      method: 'POST'\n    });\n    setToken(response.data.access_token); //empty array dependency = this runs once on load\n  }, []);\n\n  const handleSearch = async e => {\n    //preventDefault keeps page from rerendering and bad things happening\n    e.preventDefault();\n    console.log('filter', filter); //call axios with filter and token from state\n\n    const response = await axios(`https://api.spotify.com/v1/search?q=genre:\"${filter}\"&type=artist`, {\n      method: 'GET',\n      headers: {\n        'Authorization': 'Bearer ' + token\n      }\n    }); //set response into state\n\n    setItems(response.data.artists.items);\n  };\n};\n\n_s(API, \"58WjPRtu+503v/FV0xTZ7m9yan4=\");\n\n_c = API;\nexport default API;\n\nvar _c;\n\n$RefreshReg$(_c, \"API\");","map":{"version":3,"sources":["/Users/josephwojtowicz/Desktop/genrerator/client/src/API.js"],"names":["React","useState","useEffect","Axios","Credentials","API","spotify","console","log","token","setToken","filter","setFilter","filterToSend","setFilterToSend","items","setItems","response","axios","headers","btoa","ClientId","ClientSecret","data","method","access_token","handleSearch","e","preventDefault","artists"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,WAAT,QAA4B,eAA5B;;AAEA,MAAMC,GAAG,GAAG,MAAM;AAAA;;AAEd,QAAMC,OAAO,GAAGF,WAAW,EAA3B;AAEAG,EAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ;AAEA,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBT,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM,CAACU,MAAD,EAASC,SAAT,IAAsBX,QAAQ,CAAC,EAAD,CAApC;AACA,QAAM,CAACY,YAAD,EAAeC,eAAf,IAAkCb,QAAQ,CAAC,EAAD,CAAhD;AACA,QAAM,CAACc,KAAD,EAAQC,QAAR,IAAoBf,QAAQ,CAAC,EAAD,CAAlC;AACAM,EAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBC,KAArB;AACAF,EAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBG,MAAtB;AACAJ,EAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBO,KAArB,EAZc,CAad;AACA;;AAIAb,EAAAA,SAAS,CAAC,YAAW;AACnB,UAAMe,QAAQ,GAAG,MAAMC,KAAK,CAAC,wCAAD,EAA2C;AACnEC,MAAAA,OAAO,EAAE;AACT,wBAAiB,mCADR;AAET,yBAAkB,WAAWC,IAAI,CAACd,OAAO,CAACe,QAAR,GAAmB,GAAnB,GAAyBf,OAAO,CAACgB,YAAlC;AAFxB,OAD0D;AAKrEC,MAAAA,IAAI,EAAE,+BAL+D;AAMrEC,MAAAA,MAAM,EAAE;AAN6D,KAA3C,CAA5B;AAQAd,IAAAA,QAAQ,CAACO,QAAQ,CAACM,IAAT,CAAcE,YAAf,CAAR,CATmB,CAUnB;AACD,GAXQ,EAWP,EAXO,CAAT;;AAeA,QAAMC,YAAY,GAAG,MAAOC,CAAP,IAAa;AAChC;AACAA,IAAAA,CAAC,CAACC,cAAF;AACArB,IAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBG,MAAtB,EAHgC,CAIhC;;AACA,UAAMM,QAAQ,GAAG,MAAMC,KAAK,CAAE,8CAA6CP,MAAO,eAAtD,EAAsE;AAChGa,MAAAA,MAAM,EAAE,KADwF;AAEhGL,MAAAA,OAAO,EAAE;AAAE,yBAAkB,YAAYV;AAAhC;AAFuF,KAAtE,CAA5B,CALgC,CAShC;;AACAO,IAAAA,QAAQ,CAACC,QAAQ,CAACM,IAAT,CAAcM,OAAd,CAAsBd,KAAvB,CAAR;AACC,GAXH;AAYH,CA7CD;;GAAMV,G;;KAAAA,G;AA+CN,eAAeA,GAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Axios from \"axios\";\nimport { Credentials } from './Credentials';\n\nconst API = () => {\n\n    const spotify = Credentials();  \n  \n    console.log('RENDERING APP.JS');\n  \n    const [token, setToken] = useState(''); \n    const [filter, setFilter] = useState('');\n    const [filterToSend, setFilterToSend] = useState('')\n    const [items, setItems] = useState([]);\n    console.log('token', token)\n    console.log('filter', filter)\n    console.log('items', items)\n    //when the app loads, request a token from spotify\n    //and save it to state.\n  \n  \n   \n    useEffect(async() => {\n      const response = await axios('https://accounts.spotify.com/api/token', {\n          headers: {\n          'Content-Type' : 'application/x-www-form-urlencoded',\n          'Authorization' : 'Basic ' + btoa(spotify.ClientId + ':' + spotify.ClientSecret)      \n        },\n        data: 'grant_type=client_credentials',\n        method: 'POST'\n      })\n      setToken(response.data.access_token)\n      //empty array dependency = this runs once on load\n    },[])\n  \n  \n  \n    const handleSearch = async (e) => {\n      //preventDefault keeps page from rerendering and bad things happening\n      e.preventDefault()\n      console.log('filter', filter)\n      //call axios with filter and token from state\n      const response = await axios(`https://api.spotify.com/v1/search?q=genre:\"${filter}\"&type=artist`, {\n        method: 'GET', \n        headers: { 'Authorization' : 'Bearer ' + token}\n      })\n      //set response into state\n      setItems(response.data.artists.items)\n      }\n}\n\nexport default API;"]},"metadata":{},"sourceType":"module"}