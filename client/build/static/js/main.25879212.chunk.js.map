{"version":3,"sources":["components/GenreList.js","App.js","Credentials.js","index.js"],"names":["GenreList","state","genres","axios","get","then","res","data","setState","this","map","genre","React","Component","App","spotify","ClientId","ClientSecret","console","log","useState","token","setToken","filter","setFilter","items","setItems","setGenre","useEffect","a","headers","btoa","method","response","access_token","handleChange","e","target","value","handleSearch","preventDefault","artists","searchAndHandle","post","catch","error","onSubmit","className","Container","fluid","Row","Col","sm","type","onChange","filterAndHandle","name","onClick","item","Button","variant","id","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.25879212.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\n\nexport default class GenreList extends React.Component {\n    state = {\n        genres: []\n    }\n\n    componentDidMount() {\n        axios.get(`http://localhost:3001/genres/`)\n          .then(res => {\n            const genres = res.data;\n            this.setState({ genres });\n          })\n      }\n\n    render() {\n        return (\n            <div>\n                <h5>your favs</h5>\n                { this.state.genres.map(genre => <div>{genre.genre}</div>)}\n            </div>\n        )\n    }\n}","import { useCallback, useEffect, useState } from 'react';\nimport './App.css';\nimport axios from 'axios';\nimport { Credentials } from './Credentials'\nimport { DropdownButton, Dropdown, Row } from 'react-bootstrap';\nimport { Link, BrowserRouter as Router, Route } from 'react-router-dom';\nimport Button from 'react-bootstrap/Button'\nimport Col from 'react-bootstrap/Col'\nimport Container from 'react-bootstrap/Container'\nimport GenreList from './components/GenreList'\n\nconst App = () => {\n\n  const spotify = Credentials();  \n\n  console.log('RENDERING APP.JS');\n\n  const [token, setToken] = useState(''); \n  const [filter, setFilter] = useState('');\n  const [filterToSend, setFilterToSend] = useState('')\n  const [items, setItems] = useState([]);\n  const [genre, setGenre] = useState({genre: ''});\n  const [data, getGenreData] = useState({genre: ''});\n  console.log('token', token)\n  console.log('filter', filter)\n  console.log('items', items)\n  console.log('genre', genre)\n  //when the app loads, request a token from spotify\n  //and save it to state.\n\n\n \n  useEffect(async() => {\n    const response = await axios('https://accounts.spotify.com/api/token', {\n        headers: {\n        'Content-Type' : 'application/x-www-form-urlencoded',\n        'Authorization' : 'Basic ' + btoa(spotify.ClientId + ':' + spotify.ClientSecret)      \n      },\n      data: 'grant_type=client_credentials',\n      method: 'POST'\n    })\n    setToken(response.data.access_token)\n    //empty array dependency = this runs once on load\n  },[])\n\n  const handleChange = (e) => {\n    setGenre({genre: e.target.value})\n  }\n\n  const onSubmit = (e) => {\n    e.preventDefault();\n\n    axios.post('http://localhost:3001/genres/', genre)\n    .then(function (response) {\n      console.log(response)\n    })\n    .catch(function (error) {\n      console.log(error)\n    })\n    setGenre({genre:''})\n  };\n\n\n  const handleSearch = async (e) => {\n    //preventDefault keeps page from rerendering and bad things happening\n    e.preventDefault()\n    console.log('filter', filter)\n    //call axios with filter and token from state\n    const response = await axios(`https://api.spotify.com/v1/search?q=genre:\"${filter}\"&type=artist`, {\n      method: 'GET', \n      headers: { 'Authorization' : 'Bearer ' + token}\n    })\n    //set response into state\n    setItems(response.data.artists.items)\n    }\n\n  const searchAndHandle = (e) => {\n    handleSearch(e);\n    handleChange(e);\n    onSubmit(e);\n  }\n\n  const filterAndHandle = (e) => {\n    setFilter(e.target.value);\n    handleChange(e);\n  }\n\n\n  return (\n    <Router>\n   \n    <div className=\"App\" >\n        <h1>genrerator</h1>\n        <br></br>\n       <Container fluid=\"sm\">\n        <Row>\n        <Col sm={8}>\n        <form>\n          <p>search for a genre of music you enjoy</p>\n          <input type=\"text\" value={setGenre.genre} onChange={(e) => filterAndHandle(e)}/>\n          <br></br>\n          <p>or pick one here</p>\n          <select value=\"this.target.value\" onChange={(e) => setFilter(e.target.value)}>\n            <option value=\"genre\">choose one!</option>\n            <option value=\"nz indie\">nz indie</option>\n            <option value=\"highlife\">highlife</option>\n            <option value=\"c86\">c86</option>\n            <option value=\"chopped and screwed\">chopped and screwed</option>\n            <option value=\"nwobhm\">nwobhm</option>\n            <option value=\"library music\">library music</option>\n          </select>\n          <br></br>\n          <br></br>\n          <input type=\"submit\" name=\"genre\" value={setGenre.genre} onClick={(e) => searchAndHandle(e)} />\n        </form>\n        <br></br>\n        <div>\n          {items.map(item => \n            <div className=\"list-group\">\n              <Button variant=\"outline-secondary-md\"\n              key={0}\n              id={item.name}>\n                {item.name}\n              </Button>\n            </div>\n          )}\n        </div>\n        </Col>\n\n        <Col sm={2}>\n        <div>\n        <GenreList />\n        </div>\n        </Col>\n\n        </Row>\n      </Container> \n      </div>\n      \n    </Router>\n  );\n}\n\nexport default App;","const Credentials = () => {\n\n    return {\n        ClientId: '976ca23d248b4c79b0099e504f8cc7f0',\n        ClientSecret: '40796610f47d4ddba0458e1133db0c2b'\n    }\n}\n\nexport { Credentials };","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}